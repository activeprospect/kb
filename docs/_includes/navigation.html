<nav class="sidebar">
  <ul class="nav-list">
    {% for item in site.data.toc %}
      <li class="nav-item{% if item.children %} has-children expanded{% endif %}">
        {% if item.url \!= "docs" %}
          <a href="{{ site.baseurl }}{{ item.url }}" class="nav-link {% if page.url == item.url %}active{% endif %}">{{ item.title }}</a>
        {% else %}
          <span class="nav-link section" onclick="toggleSection(this)">{{ item.title }}</span>
        {% endif %}
        
        {% if item.children %}
          <ul class="nav-children">
            {% for child in item.children %}
              <li class="nav-child{% if child.children %} has-children expanded{% endif %}">
                {% if child.url \!= "docs" %}
                  <a href="{{ site.baseurl }}{{ child.url }}" class="nav-link {% if page.url == child.url %}active{% endif %}">{{ child.title }}</a>
                {% else %}
                  <span class="nav-link subsection" onclick="toggleSection(this)">{{ child.title }}</span>
                {% endif %}
                
                {% if child.children %}
                  <ul class="nav-grandchildren">
                    {% for grandchild in child.children %}
                      <li class="nav-grandchild">
                        <a href="{{ site.baseurl }}{{ grandchild.url }}" class="nav-link {% if page.url == grandchild.url %}active{% endif %}">{{ grandchild.title }}</a>
                      </li>
                    {% endfor %}
                  </ul>
                {% endif %}
              </li>
            {% endfor %}
          </ul>
        {% endif %}
      </li>
    {% endfor %}
  </ul>
</nav>

<script>
function toggleSection(element) {
  const parentItem = element.closest('.nav-item, .nav-child');
  if (parentItem && parentItem.classList.contains('has-children')) {
    parentItem.classList.toggle('expanded');
  }
}
</script>
EOF < /dev/null