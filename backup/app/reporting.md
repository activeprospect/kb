# LeadConduit Reporting - Complete Documentation

## Overview

Reporting in LeadConduit is your business intelligence engine - it transforms the millions of events generated by your lead operations into actionable insights. Think of reporting as your automated analyst, continuously monitoring vendor performance, tracking buyer success rates, calculating profitability, and identifying optimization opportunities across your entire lead ecosystem.

At its core, reporting answers critical business questions: "Which vendors provide quality leads?", "What's my true cost per conversion?", "Which flows are most profitable?", "Where are my bottlenecks?" But it goes beyond simple metrics - reporting provides the depth needed to understand not just what happened, but why it happened and what to do about it. It's the difference between knowing you rejected 1,000 leads yesterday and understanding that 80% were from one vendor with invalid phone numbers.

The power of LeadConduit's reporting lies in its connection to the comprehensive event system (see events.md). Every report draws from the complete event trail - the detailed snapshots captured at every stage of lead processing. This means you're not just counting successes and failures; you're analyzing the full context of each transaction with access to lead data, processing times, rejection reasons, and financial details. It's operational visibility at a level most businesses only dream of.

## Why Reporting Exists

### The Vendor Accountability Problem
When you're buying thousands of leads from multiple vendors, you need clear performance metrics. Who's sending quality? Who's wasting your time? Which vendors consistently fail your criteria? Without detailed reporting, vendor management becomes guesswork. Reporting solves this by providing vendor scorecards with acceptance rates, quality metrics, cost analysis, and trend tracking - turning vendor relationships from adversarial to collaborative.

### The ROI Visibility Problem
Understanding true profitability requires connecting costs to outcomes. It's not enough to know you spent $10,000 on leads last month - you need to know which sources, flows, and recipients drove profitable conversions. Reporting solves this by tracking both sides of every transaction, from purchase price through sale price to conversion feedback, giving you true ROI visibility down to the individual lead level.

### The Operational Optimization Problem
Lead operations generate massive complexity - multiple flows, dozens of steps, various integrations, conditional routing. Finding inefficiencies in this maze is nearly impossible without proper analytics. Reporting solves this by surfacing bottlenecks, highlighting problem areas, tracking processing times, and identifying optimization opportunities automatically.

### The Compliance Documentation Problem
Regulatory requirements demand detailed record-keeping. You need to prove consent was verified, demonstrate suppression list compliance, show data handling practices. Reporting solves this by providing auditable reports that document your compliance processes, making regulatory responses straightforward rather than panic-inducing.

## Core Concepts

### Report Components

Every report is built from four fundamental components that work together to extract insights from your event data:

**Columns (What to Measure)**
Columns define the metrics you want to track. LeadConduit provides dozens of pre-built columns that calculate:
- Event counts by type and outcome
- Financial metrics (revenue, cost, margin)
- Conversion tracking and ratios
- Performance timings
- Statistical aggregations

Example columns:
- `source-success`: Count of accepted leads
- `source-failure`: Count of rejected leads
- `cost`: Total purchase price paid
- `recipient-success`: Count of successful deliveries
- `conversion-received-success`: Count of positive feedback received
- `cost-per-conversion-received-success`: Calculated cost per conversion

**Rules (What to Include)**
Rules filter which events to include in your analysis. They use the same rule engine as the rest of LeadConduit (see rules.md for details):
- Filter by outcome: "Show only successful deliveries"
- Filter by participant: "Include only leads from Vendor X"
- Filter by data values: "Only California leads"
- Filter by time: "Leads submitted during business hours"

Rules let you drill down from broad metrics to specific insights. Note that rules in reports filter which events to analyze, not make decisions about lead processing.

**Group By (How to Segment)**
Group By fields break down your metrics into meaningful segments:
- By flow: Compare performance across different campaigns
- By source: Vendor-by-vendor analysis
- By recipient: Buyer performance tracking
- By time: Daily, hourly, or monthly trends
- By lead data: Geographic distribution, lead types

Multiple group-by fields create detailed breakdowns like "performance by vendor and state."

**Time Range (When to Analyze)**
Every report runs for a specific time period:
- Real-time: Last hour or last 15 minutes
- Daily: Yesterday's complete results
- Weekly/Monthly: Longer-term trends
- Custom: Any specific date range

Time ranges use the event timestamp, ensuring accurate historical analysis.

### Report Types

LeadConduit provides several categories of reports, each serving different analytical needs:

**Standard Reports**
Pre-built reports that cover common use cases:
- Stats by Flow: Overall flow performance
- Stats by Source: Vendor comparison  
- Stats by Recipient: Buyer analysis
- Stats by Source & Flow: Detailed vendor breakdown
- Stats by Recipient & Flow: Detailed buyer breakdown
- Stats by Source & Purchase Price: Cost analysis
- Stats by Recipient & Sale Price: Revenue analysis

These reports are automatically created for new accounts and provide immediate value.

**Ping Reports** (Ping Post Accounts)
Specialized reports for ping-post operations:
- Pings by Flow: Ping volume and win rates
- Pings by Source: Vendor ping performance
- Pings by Flow & Source: Detailed ping analytics

These track the unique metrics of ping-post lead distribution.

**Custom Reports**
Reports you create for specific business needs:
- Combine any columns, rules, and groupings
- Track custom fields and metrics
- Focus on specific business questions
- Build executive dashboards

Custom reports unlock the full power of LeadConduit's analytics.

**Shared Reports**
Reports with generated sharing tokens that can be:
- Accessed without authentication
- Embedded in other systems
- Shared with partners/vendors
- Included in automated reporting

Shared reports enable transparency while maintaining security.

### The Reporting Data Model

Reports operate on the rich event data captured throughout lead processing:

**Event Properties Available for Rules and Grouping:**
- `outcome`: success, failure, error, skip
- `type`: source, recipient, filter, feedback
- `ms`: Processing time in milliseconds
- `purchase_price`: What you paid (on source events)
- `sale_price` or `revenue`: What you charged (on recipient events)
- `vars.*`: All lead data and metadata captured in the event

**The vars Namespace:**
The `vars` object in each event contains the complete lead snapshot:
- `vars.lead.*`: All lead fields with parsed values
- `vars.source.*`: Source metadata (id, name)
- `vars.flow.*`: Flow metadata (id, name)  
- `vars.recipient.*`: Recipient details
- Custom fields without prefixes

This rich data model enables deep analysis across any dimension.

### Report Execution

When a report runs, LeadConduit:

1. **Queries the Event Store**: Retrieves all events matching the time range
2. **Applies Rules**: Filters events based on report rules
3. **Calculates Metrics**: Computes values for each column
4. **Groups Results**: Aggregates by specified group-by fields
5. **Enhances Output**: Adds names for IDs (flow names, entity names)
6. **Returns Results**: Formatted data ready for display or export

This process is optimized for performance and scalability, handling millions of events efficiently.

## Common Reporting Patterns

### Vendor Performance Analysis

Track which vendors deliver value:

```
Report: "Vendor Quality Scorecard"
Columns: 
- source-success (Accepted leads)
- source-failure (Rejected leads)  
- cost (Total spent)
- conversion-received-success (Conversions)
- cost-per-conversion-received-success (Cost per conversion)

Rules:
- None (include all sources)

Group By:
- vars.source.id (By vendor)
- vars.flow.id (By campaign)

Result: Complete vendor performance metrics with ROI
```

### Rejection Analysis

Understand why leads fail:

```
Report: "Rejection Reasons by Vendor"
Columns:
- source-failure (Failed count)

Rules:
- outcome equals "failure"

Group By:
- vars.source.id (By vendor)
- reason (By rejection reason)

Result: Top rejection reasons for each vendor
```

### Financial Reconciliation

Track money in and out:

```
Report: "Daily Financial Summary"
Columns:
- source-success (Leads purchased)
- cost (Total cost)
- recipient-success (Leads sold)
- revenue (Total revenue)

Rules:
- outcome equals "success"

Group By:
- Day of timestamp

Result: Daily P&L with volume and margins
```

### Buyer Performance Tracking

Monitor buyer success:

```
Report: "Buyer Delivery Metrics"
Columns:
- recipient-success (Successful deliveries)
- recipient-failure (Failed deliveries)
- recipient-error (Technical errors)
- revenue (Total revenue)

Group By:
- vars.recipient.id (By buyer)
- Hour of timestamp (By hour)

Result: Buyer reliability and revenue tracking
```

### Compliance Auditing

Document regulatory compliance:

```
Report: "Consent Verification"
Columns:
- source-success (Accepted with consent)
- source-failure (Rejected - no consent)

Rules:
- trustedform_decisions.valid exists

Group By:
- vars.flow.id
- Day of timestamp

Result: Proof of consent verification
```

## Advanced Reporting Concepts

### Performance Metrics

Beyond counts and financial data, reports can track operational performance:

**Processing Time Analysis**
- Track average `ms` values by step type
- Identify slow integrations
- Monitor system performance
- Plan capacity needs

**Error Rate Tracking**
- Monitor technical failures vs business rejections
- Track integration reliability
- Identify problem services
- Plan maintenance windows

### Multi-Touch Attribution

Since LeadConduit records the complete journey, you can analyze:
- Which enhancement services improve conversion
- Impact of data append on buyer acceptance
- Value of phone validation on contact rates
- ROI of each processing step

### Cohort Analysis

Group leads by shared characteristics and track over time:
- Morning vs evening submission performance
- Weekend vs weekday quality differences
- Seasonal patterns in lead flow
- Geographic performance variations

### Funnel Analytics

Track lead progression through your processing funnel:
- Submission → Acceptance → Delivery → Conversion
- Identify drop-off points
- Optimize acceptance criteria
- Improve delivery rates

## Using Reports Effectively

### Building Your Reporting Strategy

1. **Start with Standard Reports**: They cover 80% of needs
2. **Identify Key Metrics**: What drives your business?
3. **Create Role-Based Reports**: 
   - Executive: Financial summaries
   - Operations: Performance metrics
   - Vendor Management: Quality scorecards
   - Compliance: Audit reports
4. **Automate Distribution**: Use shared reports for regular updates
5. **Iterate Based on Insights**: Refine reports as you learn

### Report Design Best Practices

**Keep Reports Focused**
- One business question per report
- 3-5 columns maximum
- Clear grouping strategy
- Meaningful names

**Use Filters Wisely**
- Don't over-filter (you might miss insights)
- Consider separate reports vs complex rules
- Document filter logic
- Test edge cases

**Optimize for Performance**
- Shorter time ranges run faster
- Fewer groups improve speed
- Complex rules add overhead
- Consider report scheduling

**Enable Action**
- Reports should drive decisions
- Include enough context
- Make data exportable
- Track trends over time

### Sharing and Distribution

Reports can be shared through:

**Direct Access**
- Users run reports on-demand
- Interactive filtering and time ranges
- Real-time data access
- Full UI features

**Shared Links**
- Generate secure sharing tokens
- No authentication required
- Read-only access
- Perfect for vendors/partners

**API Integration**
- Programmatic report execution
- Embed in dashboards
- Automate data pipelines
- Custom visualizations

**Scheduled Exports**
- Regular email delivery
- CSV format for spreadsheets
- Automated processing
- Historical archiving

## Common Misconceptions

### "Reports are just basic counts"
Reality: Reports provide deep analytics including financial data, conversion tracking, performance metrics, and complex aggregations across any dimension.

### "I need all data in reports"
Reality: Reports are summaries - for raw data access, use the Events API or Exports (see exports.md). Reports excel at aggregated insights, not row-level details.

### "Real-time means instant"
Reality: Reports have a small processing delay (typically minutes). For true real-time monitoring, use the event stream directly.

### "More columns = better insights"
Reality: Focused reports with 3-5 key metrics often provide clearer insights than kitchen-sink reports trying to show everything.

## Key Takeaways

1. **Reporting Transforms Events into Insights**: Raw event data becomes actionable business intelligence
2. **Four Components Define Reports**: Columns (metrics), Rules (filters), Group By (segments), Time Range (period)
3. **Standard Reports Provide Immediate Value**: Pre-built reports cover common use cases
4. **Custom Reports Enable Deep Analysis**: Combine any metrics, filters, and groupings
5. **Reports Connect Money to Outcomes**: Track costs, revenue, and ROI in unified views
6. **Group By Unlocks Segmentation**: Break down metrics by any dimension
7. **Shared Reports Enable Transparency**: Secure sharing with partners and vendors
8. **Performance Metrics Matter**: Track not just what happened but how fast
9. **Reports Drive Optimization**: From vendor management to operational efficiency
10. **Start Simple, Iterate Often**: Begin with standard reports, refine based on needs